<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>칸반 보드</title>
    <style>
        .board {
            display: flex;
            justify-content: space-between;
        }
        .group {
            flex: 1;
            margin: 10px;
            padding: 10px;
            border: 1px solid #ccc;
            border-radius: 5px;
            background-color: #f9f9f9;
        }
        .task {
            margin: 10px 0;
            padding: 10px;
            border: 1px solid #dfe1e6;
            border-radius: 3px;
            background-color: #f4f5f7;
            box-shadow: 0 1px 0 rgba(9,30,66,.25);
            cursor: pointer;
            position: relative;
        }
        .task:hover {
            background-color: #ebecf0;
        }
        .task .actions {
            display: none;
            position: absolute;
            right: 5px;
            top: 5px;
        }
        .task:hover .actions {
            display: flex;
            justify-content: space-between;
        }
    </style>
</head>
<body>
    <div class="board">
        <div class="group" id="todo-group">
            <h2>할일</h2>
            <button id="add-todo">할일 입력</button>
        </div>
        <div class="group" id="in-progress-group">
            <h2>진행중</h2>
        </div>
        <div class="group" id="done-group">
            <h2>완료</h2>
        </div>
    </div>

    <script>
        document.getElementById('add-todo').addEventListener('click', function() {
            var task = document.createElement('div');
            task.className = 'task';
            task.innerHTML = '<div class="actions"><button class="edit-task">수정</button><button class="delete-task">삭제</button></div>';
            var taskInput = document.createElement('input');
            taskInput.type = 'text';
            taskInput.placeholder = '할일을 입력하세요';
            task.appendChild(taskInput);
            taskInput.disabled = false; // Enable input field for the initial task creation
            task.setAttribute('draggable', 'true');
            task.addEventListener('dragstart', function(e) {
                e.dataTransfer.setData('text/plain', 'task');
            });
            this.parentNode.insertBefore(task, this);
        });

        document.addEventListener('click', function(e) {
            if (e.target.classList.contains('edit-task')) {
                var taskInput = e.target.parentNode.parentNode.querySelector('input');
                taskInput.disabled = false; // Enable input field for editing
                var newText = prompt('할일을 수정하세요', taskInput.value);
                if (newText) taskInput.value = newText;
                taskInput.disabled = true; // Disable input field after editing
            } else if (e.target.classList.contains('delete-task')) {
                e.target.parentNode.parentNode.remove();
            }
        });

        // Add event listener for 'keydown' to detect Enter key press for task input completion
        var taskInputs = document.querySelectorAll('input');
        taskInputs.forEach(function(taskInput) {
            taskInput.addEventListener('keydown', function(e) {
                if (e.key === 'Enter') {
                    taskInput.disabled = true; // Disable input field after task input completion
                    taskInput.parentNode.removeChild(taskInput); // Remove the input field
                    taskInput.parentNode.textContent = taskInput.value; // Set task box text to the input value
                }
            });
        });
    </script>
</body>
</html>