<script>
    function validateId() {
        const idType = document.getElementById('idType').value;
        const idNumber = document.getElementById('idNumber').value;

        // 기본 형식 검사
        if (!/^\d{6}-\d{7}$/.test(idNumber)) {
            showResult("오류: 올바른 형식이 아닙니다. (예: 000000-0000000)", false);
            return;
        }

        const numbers = idNumber.replace('-', '').split('').map(Number);
        const multipliers = [2,3,4,5,6,7,8,9,2,3,4,5];
        let sum = 0;

        // 검증 숫자 계산
        for (let i = 0; i < 12; i++) {
            sum += numbers[i] * multipliers[i];
        }

        const checkDigit = (11 - (sum % 11)) % 10;

        if (checkDigit !== numbers[12]) {
            showResult("오류: 유효하지 않은 번호입니다. (검증 숫자 불일치)", false);
            return;
        }

        // 주민등록번호 특정 규칙
        if (idType === 'resident') {
            const genderCode = numbers[6];
            if (![1,2,3,4].includes(genderCode)) {
                showResult("오류: 유효하지 않은 주민등록번호입니다. (성별 코드 오류)", false);
                return;
            }
        }

        // 외국인등록번호 특정 규칙
        if (idType === 'foreigner') {
            const genderCode = numbers[6];
            if (![5,6,7,8].includes(genderCode)) {
                showResult("오류: 유효하지 않은 외국인등록번호입니다. (성별 코드 오류)", false);
                return;
            }
        }

        showResult("유효한 " + (idType === 'resident' ? "주민등록번호" : "외국인등록번호") + "입니다.", true);
    }

    function showResult(message, isValid) {
        const resultDiv = document.getElementById('result');
        resultDiv.textContent = message;
        resultDiv.className = isValid ? 'valid' : 'invalid';
    }
</script>